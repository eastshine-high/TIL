## 도메인 객체의 생명주기

모든 객체에는 생명주기가 있다. 한 객체는 생성되어 다양한 상태를 거친 후 결국 저장되거나 삭제되면서 소멸한다. 물론 이들 중 상당수는 객체의 생성자를 호출해서 만들어진 다음 특정 연산에서 사용된 후 가비지 컬렉터에게 보내지는 단순하고 일시적인(transient) 객체다. 이런 객체는 복잡하게 만들 필요가 없다. 그러나 다른 객체들은 더 오래 지속되며, 활성 메모리 안에서만 시간을 보내지 않는다. 그것들은 다른 객체와 복잡한 상호의존성을 맺는다. 또한 여러 가지 상태의 변화를 겪기도 하는데, 이때 갖가지 불변식이 적용된다. 이러한 객체들을 관리하는 데 실패한다면 MODEL-DRIVEN DESIGN을 시도하는 것이 쉽게 좌절될 수 있다. 

도메인 객체의 관리와 관련된 문제는 아래의 두 가지 범주로 나뉜다.

- 생명주기 동안의 무결성 유지하기
- 생명주기 관리의 복잡성으로 모델이 난해해지는 것을 방지하기

본 장에서는 이러한 문제를 세 가지 패턴을 이용해 해결한다.

먼저 `AGGREGATE(집합체)`는 소유권과 경계를 명확히 정의함으로써 모델을 엄격하게  만들어 객체 간의 연관관계가 혼란스럽게 얽히지 않게 한다. 이 패턴은 생명주기상의 전 단계에 걸쳐 도메인 객체의 무결성을 유지하는 데 매우 중요하다.

생명주기의 초기 단계로 초점을 바꿔 `FACTORY(팩터리)`를 이용해 복잡한 객체와 AGGREGATE를 생성하고 재구성함으로써 그것들의 내부 구조를 캡슐화한다.

마지막으로 생명주기의 중간과 마지막을 다루며, 거대한 관련 인프라스트럭처를 캡슐화하면서 영속 객체를 찾아 조회하는 수단을 제공하는 `REPOSITORY(리파지터리)`가 있다.

## 참조

<에릭 에반스, 도메인 주도 설계, 위키북스>
